# Wallet API

REST API для управления кошельками с поддержкой операций пополнения и списания средств. Можно смотреть баланс кошелька, все кошельки смотреть запрещено. Валидация предотвращает пополнение с отрицательным балансом, либо равным нулю, снятие при недостатке средств. При работе в конкурентной среде, параллельные запросы на изменения баланса одного кошелька не влияют друг на друга.

## Требования

- Docker
- Docker Compose

## Как запустить проект в Docker

Клонировать репозиторий:

```
git clone git@github.com:mbragins1988/TEST_TASK_WALLET.git
```

Перейти в папку

```
cd TEST_TASK_WALLET
```

Создайте файл в корневой директории .env с вашими параметрами

```
POSTGRES_DB=
POSTGRES_USER=
POSTGRES_PASSWORD=
POSTGRES_HOST=
POSTGRES_PORT=
SECRET_KEY=
DEBUG=True
```

Запустите проект

```
docker-compose up --build
```

Проект будет доступен по адресу

```
http://127.0.0.1:8000/
```

## API Endpoints

- ✅ Создание кошельков - POST http://127.0.0.1:8000/api/v1/wallets/
- ✅ Просмотр баланса кошелька - GET http://127.0.0.1:8000/api/v1/wallets/{id}
- ✅ Пополнение (DEPOSIT) / Списание средств (WITHDRAW) с кошелька  - POST http://127.0.0.1:8000/api/v1/wallets/{id}/operation/


#### Пример запроса операции пополнения:
```json
{
  "operation_type": "DEPOSIT",
  "amount": "1000.00"
}

#### Пример запроса операции снятия средств:
```json
{
  "operation_type": "WITHDRAW",
  "amount": "100.00"
}

## Запуск тестов в Docker

docker-compose exec web python manage.py test

### Покрытие тестов

✅ Создание кошелька через API
✅ Получение баланса кошелька
✅ Пополнение средств (DEPOSIT)
✅ Списание средств (WITHDRAW)
✅ Валидация снятия при недостатке средств
✅ Валидация неверного типа операции
✅ Валидация отрицательной суммы
✅ Валидация нулевой суммы
✅ Обработка несуществующего кошелька
✅ Конкурентные операции

### Стек технологий:

- Python
- Django
- Django REST Framework
- PostgreSQL
- Docker & Docker Compose

### Авторы проекта
Михаил Брагин
